# 更新日誌 (Changelog)

本專案的所有重大變更都將記錄於此文件中。

## [v1.1.0] - 2024-12-23 (穩定基礎版本)

此版本作為未來開發的穩定基礎版本 (Stable Baseline)。

### ✨ 新增功能
- **強化偵測模型**：改用 **SSD MobileNet V1** 模型，相較於原本的 Tiny Face Detector，大幅提升了臉部偵測的準確度。
- **臉部旋轉偵測**：導入 **FaceLandmarks68** 技術，可偵測臉部旋轉角度，讓 Emoji 或遮蓋效果能隨頭部傾斜而自動調整方向。
- **新增遮蓋類型**：
  - **馬賽克 (Mosaic)**：像素化遮蓋效果。
  - **模糊 (Blur)**：高斯模糊遮蓋效果。
- **遮蓋類型選擇介面**：新增專屬工具列，可快速切換 Emoji、馬賽克與模糊模式。
- **詳細載入進度**：新增視覺化進度條，顯示各個 AI 模型 (SSD, Landmarks, Age/Gender) 的載入狀態。

### 🐛 錯誤修復
- **下載功能修復**：修復了刪除部分照片後，下載單張照片會導致程式崩潰的問題 (Null Pointer Exception)。
- **Service Worker 穩定性**：修復了當網路請求失敗且快取中無該檔案時，會導致 Service Worker 崩潰的嚴重問題（已加入正確的 404 處理機制）。
- **資源缺失修復**：補上缺失的 `loading-progress.css` 檔案，解決 Service Worker 快取錯誤。
- **觸控事件警告**：為觸控事件監聽器加入 `{ passive: false }` 設定，解決瀏覽器警告並確保行動裝置上的拖曳功能正常運作。
- **Meta 標籤更新**：更新已棄用的 `apple-mobile-web-app-capable` meta 標籤。

### ⚡ 效能與介面優化
- **Canvas 效能優化**：全面啟用 `willReadFrequently: true` 屬性，消除瀏覽器控制台的效能警告並提升圖片處理速度。
- **介面改進**：
  - 為預覽卡片的「刪除」按鈕加上文字標示。
  - 優化手機版 (RWD) 的按鈕排列，在小螢幕上採用 2x2 網格佈局，確保按鈕顯示整齊。
- **模型載入優化**：優化了 face-api 模型的非同步載入順序。
- **PWA 增強**：增強 `sw.js` 對於 fetch 事件的錯誤處理能力。

---

## [v1.0.0] - 2024-12-23 (初始發布)

### ✨ 核心功能
- **自動臉部偵測**：自動偵測上傳照片中的臉部。
- **年齡判斷**：基於 AI 的年齡估算，可選擇僅遮蓋兒童臉部。
- **Emoji 遮蓋**：預設使用可愛 Emoji 進行遮蓋，提供多種選擇。
- **批次處理**：支援一次上傳並處理多張照片。
- **編輯模式**：
  - 拖曳移動遮蓋位置。
  - 調整遮蓋大小。
  - 手動新增/移除遮蓋。
- **對比檢視**：提供滑桿功能，方便對比原圖與處理後的差異。
- **PWA 支援**：可安裝為獨立 App，並支援離線使用。
- **隱私優先**：所有處理皆在瀏覽器端本機執行，照片不會上傳至任何伺服器。
